.form-step { display: none; }
.form-step.active { display: block; }

.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem 2rem; }

.form-group { position: relative; }

.form-group label {
    font-weight: 500; font-size: 1rem; position: absolute; top: 0.8rem; left: 1.5rem; /* Adjusted for padding */
    color: var(--color-text); opacity: 0.7; pointer-events: none; transition: all 0.2s ease-out;
}

.form-group input[type="date"] + label, .form-group input[type="time"] + label {
    top: -1.5rem; left: 0; font-size: 0.9rem; opacity: 1; color: var(--color-accent);
}

input, textarea {
    width: 100%; padding: 0.8rem 1.5rem; border: 2px dashed var(--color-border); border-radius: 50px; /* Pill-shaped with dashed border */
    font-family: var(--font-body); font-size: 1rem; transition: all 0.3s ease-in-out;
    background-color: var(--color-surface); color: var(--color-text);
}

input:focus, textarea:focus { 
    outline: none; 
    border-color: var(--color-primary); /* Soft pink focus */
    box-shadow: 0 0 0 3px hsla(340, 60%, 85%, 0.5); /* Softer pink shadow */
}

input:focus + label, input:not(:placeholder-shown) + label, textarea:focus + label, textarea:not(:placeholder-shown) + label {
    top: -1.5rem; left: 0; font-size: 0.9rem; opacity: 1; color: var(--color-accent);
}

/* Validation & Error Styles */
.error-message {
    color: var(--color-error);
    font-size: 0.8rem;
    font-weight: 500;
    margin-top: 0.25rem;
    padding-left: 1.5rem;
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out, margin-top 0.3s ease-out;
}

.form-group.invalid .error-message {
    max-height: 2rem;
    opacity: 1;
}

.form-group.invalid input, .form-group.invalid textarea {
    border-color: var(--color-error);
}

.form-group.invalid label {
    color: var(--color-error);
}

input.invalid {
    border-color: var(--color-error);
}

label.checkbox-group {
    display: flex; align-items: center; gap: 0.5rem; pointer-events: auto;
}

.notes { margin-top: 2rem; }

.totals .total-grid { width: 100%; max-width: 450px; margin-left: auto; display: grid; grid-template-columns: 1fr auto; gap: 1.2rem; align-items: center; }
.total-grid .total-row { display: contents; }
.total-grid label { font-weight: 500; text-align: right; }
.total-grid span, .total-grid input { font-size: 1.1rem; font-weight: 500; text-align: right; }
.total-net, .balance { font-family: var(--font-heading); font-size: 1.4rem !important; font-weight: 700 !important; color: var(--color-accent); transition: color 0.3s; }

.terms ul { list-style-position: inside; color: #757575; }
.dark-theme .terms ul { color: var(--color-text); opacity: 0.8; }
.terms li {
    margin-bottom: 0.5rem;
}  
/* Custom Select Styles */  
select { -webkit-appearance: none; -moz-appearance: none; appearance: none; width: 100%; padding: 0.8rem 1.5rem; border: 2px dashed var(--color-border); border-radius: 50px; font-family: var(--font-body); font-size: 1rem; transition: all 0.3s ease-in-out; background-color: var(--color-surface); color: var(--color-text); background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%235C4B51' width='18px' height='18px'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1.5rem center; }  
select:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px hsla(340, 60%, 85%, 0.5); }  
.form-group select ~ label { top: -1.5rem; left: 0; font-size: 0.9rem; opacity: 1; color: var(--color-accent); } 

/* Ensure product select dropdown has enough width */
#product-table td:has(.product-select) {
    min-width: 300px; /* Increased for full product name */
}

/* Adjust width for Quantity column */
#product-table td:has(.quantity) {
    width: 80px;
}

/* Adjust width for Unit Price column */
#product-table td:has(.unit-price-display) {
    min-width: 120px;
}
